Что такое дерево AVL?
Дерево AVL — это сбалансированное бинарное дерево поиска,
то есть бинарное дерево поиска, в котором высоты левого и правого
поддеревьев каждого узла отличаются не более чем на единицу.

После каждой операции вставки и удаления этот инвариант проверяется,
и при необходимости баланс восстанавливается ротацией AVL.

Высота дерева AVL
Высота (под)дерева указывает, насколько далеко корень находится от
самого нижнего узла. Следовательно, (под)дерево, состоящее только из
корневого узла, имеет высоту 0.

Коэффициент баланса дерева AVL
Коэффициент баланса «BF» узла обозначает разницу высот
«H» правого и левого поддеревьев («node.right» и «node.left»):

BF(узел) = H(узел.справа) - H(узел.слева)

Высота несуществующего поддерева равна -1
(на единицу меньше высоты поддерева, состоящего только из одного узла).

Есть три случая:

Если коэффициент баланса < 0, узел называется левосторонним.
Если коэффициент баланса > 0, говорят, что узел тяжелый справа.
Коэффициент баланса 0 представляет собой сбалансированный узел.
В дереве AVL коэффициент баланса в каждом узле равен -1, 0 или 1.

В следующем примере показано дерево AVL с высотой и коэффициентом баланса,
указанными в каждом узле:

Пример дерева AVL с указанием высот и коэффициентов баланса
Пример дерева AVL с указанием высот и коэффициентов баланса
Узлы 2 и 7 в этом примере — правые, узел 4 — левые. Все остальные
узлы сбалансированы.

Следующее дерево, однако, не является деревом AVL, поскольку критерий AVL (-1 ≤ BF ≤ 1) не выполняется в узле 4. Его левое поддерево имеет высоту 1, а правое, пустое поддерево имеет высоту - 1. Разница между ними -2.

Двоичное дерево поиска, не удовлетворяющее инварианту AVL